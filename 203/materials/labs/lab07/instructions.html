<!doctype html>
<html>
<head>
   <meta charset="utf-8"/>
   <title>Lab 7, CSC/CPE 203</title>
   <link rel="stylesheet" href="../../lib/assignment.css" type="text/css">
</head>

<body>
<div class="container">
  <div class="boxed">

  <div class="header">  <h1>Lab 7, CSC 203 - Inheritence</h1></div>

<p>
In this lab you will explore some aspects of inheritance in Java.
In this lab, you will refactor a provided solution which implements a
simple calculator to gain
experience with inheritance.
</p>

 <div class="header">
 <h2>Objectives</h2>
 </div>
 
<ul>
<li><p>To explore the the use of inheritence 
<li><p>To practice recognizing when classes share data or similar methods and how to use inheritence to make these relationships explicit  
</ul>


<div class="header">
<h2>Given Files</h2>
</div>

<p>
The given files for this lab are in <a href="lab6given">lab6given</a>.
This is a working java program that implements a simple calculator.  Here's
a sample session of using the calculator:
</p>
<blockquote><pre><code>
wffoote@Lelu:~/cpe203/general/lab_materials/lab07/lab6given$ ./run.sh
Welcome to the simple calculator.
 To exit, hit &lt;ctrl-d> in Unix or &lt;ctrl-z> in Windows.
-> 2+2
(2.0 + 2.0) => 4.0
-> -3/5
(-3.0 / 5.0) => -0.6
-> set foo=9
set foo = 9.0 => 9.0
-> 7/f00
unbound identifier: f00
-> 7/foo
(7.0 / foo) => 0.7777777777777778
-> ^D
</code></pre></blockquote>
<p>
An overview of some of the key classes that make up the calculator is
given in the following UML diagram:
</p><p>
<img src="doc_files/calculator.svg">
</p>

<div class="header">
<h2>Refactoring using Inheritance</h2>
</div>

<p>
For this lab you will modify the calculator to refactor common functionality 
out of some of the classes into a common class.
</p>

<p>
   Many of the expressions are what we would typically call binary
expressions.  In particular, <code>AddExpression</code>,
<code>DivideExpression</code>, <code>MultiplyExpression</code>,
and <code>SubtractExpression</code> each have very similar behavior.
To see this clearly, compare <code>AddExpression.java</code> and
<code>SubtractExpression.java</code>.

<p>
To refactor this common behavior, the steps below might serve as a
helpful guideline.
</p>

<ul>
<li>Create a new class named
<code>BinaryExpression</code> whose construcor takes two Expression
objects.  This class 
should implement
<code>Expression</code>.
<li>Each of the classes listed above must eventually be modified to inherit from
<code>BinaryExpression</code>. Pick one to start with.
<li>Now lift the data that this class shares in common with the other
classes you'll eventually be modifying into the parent class
<code>BinaryExpression</code>.  Make this data
<code>private</code>.
<li>With the common data in the parent, the common functionality will also
be lifted.  Move the <code>evaluate()</code> and <code>toString()</code> methods
into the <code>BinaryExpression</code> class.
<li>Run and test your program.
<li>Modify the code in <code>evaluate</code> in the
<code>BinaryExpression</code> class
to evaluate each operand (i.e., <code>lft</code> and <code>rht</code>)
and to pass the results to a new, <code>protected</code> method named
<code>applyOperator(...)</code>.  This new method will not be defined in
<code>BinaryExpression</code>, but must be declared.  What's the name
for this sort of method?
<li>In the subclass,implement this new method
as is appropriate for the subclass's operator.
<li>Test your program, and make sure it still works.
<li>You'll notice that <code>toString()</code> needs to know the string
    representation of the operation.  Add another protected method
    called <code>getOperatorName</code> in <code>BinaryExpression</code>, and
    implement it in the subclass.  Use that new method in
    <code>BinaryExpression.toString()</code>.
<li>Test your program, and make sure it still works.
<li>One by one, modify the other classes to inherit from
    <code>BinaryExpression</code>.
</ul>

<div class="header">
<h2>Submission</h2>
</div>

<p>
Submit your code in <code>turninXXX/lab07</code> to GitHub by midnight on the due date.  
If you'd like to submit the lab one day late with a penalty of 5%, 
add a file called <code>late_5_percent_off.txt</code> to the 
<code>lab07</code> directory.  If you'd like to submit the lab two 
days late with a penalty of 15%, add a file called
<code>late_15_percent_off.txt</code> to the <code>lab07</code>
directory.  Make sure you add and push the late file.
<p>
Please don't submit <code>doc_files</code> or the instructions.
<p>
After your code is working and submitted,
check you submission using the <code>checkgit</code> command on the
unix server.  If the autograder can't compile your lab for a reason that
is caught by <code>checkgit</code>, you will get a zero on the lab.  To
check your submission, on a Unix server type:
<blockquote><pre>checkgit &lt;git-login> 203 lab07</pre></blockquote>
<p>
If it works, you will see the message "** Tests Passed **".  If not,
you will see some kind of error message.  The error message might not tell
you exactly what you need to change, but it should give an indication as
to what is wrong.
</div>
</div>
</div>
</body>
</html>
