<!doctype html>
<html>
<head>
   <meta charset="utf-8"/>
   <title>Lab 2, CSC/CPE 203</title>
   <link rel="stylesheet" href="../../lib/assignment.css" type="text/css">
</head>

<body>
<div class="container">
  <div class="boxed">

  <div class="header">  <h1>Lab 2, CSC/CPE 203 - Java Collections, Control, Classes, Testing, and UML</h1></div>

<p></p>

<div class="header">
<h2>Orientation</h2>
</div>

<p>
This lab is a further introduction to Java.  Part 1 uses Java control
structures as related to some Java collections.  Part 2 introduces
class structure and definition.  Part 3 introduces UML, and the
tool we'll be using to create UML documents.
Those already familiar with Java should finish the lab and then offer 
to help others.
</p>

<div class="header">
<h2>Objectives</h2>
</div>

<ul>
<li>To be able to iterate through different Java collections with various control loops (part 1)
<li>To be able to write your own class with specified methods (part 2).
<li>To be able to use unit testing, including writing your own tests for your code (part 1 and 2)
<li>To be able to write a very simple UML diagram of a class using yEd (part 3)
</ul>

<div class="header">
<h2>Resources</h2>
</div>

<ul>
<li>Your peers
<li>Your instructor
<li>The <a href="https://docs.oracle.com/en/java/javase/11/docs/api/index.html">Java 
Standard Library </a>- Bookmark this web page, or download a copy.  You 
will be using the Java Standard Library documentation regularly this quarter.
You should bookmark this page rather than doing google searches for
documentation.  A google
search will often give you information about the wrong version of Java,
inappropriate advice, or bad advice.
</ul>

<div class="header">
<h2>Building and Running Programs</h2>
</div>

<p>
For this lab you are again required to compile and run Java from the
command-line.  This time, however, you're provided with the file
<code>run.sh</code> (Unix/Mac), or <code>wrun.cmd</code> (Windows) to
build and run the program.
</p>

<p>
To compile multiple Java files, one can run the following command:
<p>
<code>javac *.java</code>
</p>
However, as your software starts to have more parts, the command used to
compile it becomes more complex.  
For this lab, we will be using a unit testing library called "testy"
(<a href="https://testy.jovial.com/">https://testy.jovial.com/</a>)
to help us write tests to ensure the correctness of our code.  In order to
do this, you need to tell the java compiler, and the java runtime where
this library is.  It is in <code>lib/testy.jar</code> with your class materials.
<p>
It's tedious to continually specify things like the path to the library.
When developing on the command line, it's beneficial to collect the commands
to compile and run a program in a small build file.  One has been provided
for you for both part1 and part2:  <code>run.sh</code> on Unix/Mac, 
and <code>wrun.cmd</code> for
windows.  Before getting started, take a look at the contents of
<code>run.sh</code>:
<blockquote><pre>
#!/bin/bash -x
cd `dirname $0`
if [ "$MATERIALS_DIR_203" = "" ] ; then
    # You can set MATERIALS_DIR_203 in you .mybashrc or
    # .bashrc or wherever if you don't want to have to edit
    # this script when you copy the directory.
    echo "Please set the MATERIALS_DIR_203 environment variable"
    exit 1
fi
LIBS=$MATERIALS_DIR_203/lib/testy.jar

#
# Compile the program:
#
rm -rf out
mkdir out
javac -Xlint:unchecked -Xmaxerrs 5 -sourcepath src  \
	-cp $LIBS -d out src/*.java
if [ $? != 0 ] ; then
    exit 1
fi

java -cp $LIBS:out -ea Main $*
</pre></blockquote>
This is a Unix "shell script."  You can run it by typing
./run.sh in the directory that cointains it.  For Windows,
<code>wrun.cmd</code>
is similar, but more basic; you can run it by typing
</code>.\run.sh</code> from a Windows command prompt.
<p>
This little program does the following:
<ul>
<li>It verifies that the MATERIALS_DIR_203 environment variable has
    been set.
<li>It sets LIBS to the library (or, later, libraries) that the program
    needs.
<li>It deletes the directory <code>out</code>, if it exists, and creates
    a new, empty directory.
<li>It runs the Java compiler with some useful options:
    <ul>
    <li><code>-Xlint:unchecked</code> gives you more complete error
        checking than the default.  The default behavior can be useful
        if you're compiling older Java code, but you're not doing that.
    <li><code>-Xmaxerrs 5</code> limits the number of errors that the
        compiler produces to 5.  After the first five or so compiler 
        errors, it's usually best to just re-run the compiler; limiting
        the compiler to five avoids filling up screenfulls of error messages
        for a misplaced semicolon.
    <li><code>-sourcepath src</code> tells the compiler to look for
        <code>.java</code> source files in the directory <code>src</code>.
    <li><code>-cp $LIBS</code> tells the compiler where to find the libraries
    <li><code>-d out</code> tells the compiler to put the generated code
        in the directory <code>out</code>.
    <li><code>src/*.java</code> instructs it to compile all of the
        Java files in the <code>src</code> directory.
    </ul>
<li>Next, the <code>run.sh</code> script checks if compilation succeeded.
    Unix commands return a number when they run.  Any number other than
    zero means it failed, so the script is just checking for a non-zero
    value.  It bails out (by calling <code>exit</code>) if the result is
    non-zero.
<li>Finally, the program is run.
    <ul>
    <li><code>-cp $LIBS:out</code> tells the Java runtime to look in the
        libraries, and then in the directory <code>out</code> for code.
    <li><code>-ea</code> enables Java assertion checking.  This will
        be covered in class in a subsequent week.
    <li><code>Main</code> instructs the Java runtime to load a class
        called <code>Main</code>.  It then executes the static method
        <code>main(String[])</code> in that class.
    <li><code>$*</code> forwards any command-line arguments you passed
        to run.sh on to your program.
    </ul>
</ul>
<p>
That's quite a bit just to run a program!  There's a reason for all
these options, though.  Java was designed as a professional tool to
be used for writing large programs; it is not optimized for beginners.

<div class="header">
<h2>Setup</h2>
</div>
<p>
As with the last lab, you should copy the lab directory into
your turnin directory.
As a reminder, you can do this from 
your main directory for CSC 203 with the <code>cp</code> command.
Please also delete the instructions; you don't need to submit them!
From Unix, you can do this with the following commands:
<blockquote><pre>cp -r materials/labs/lab02 turnin-XXX/
rm turnin-XXX/lab02/part3/UMLExercise.*
rm turnin-XXX/lab02/instructions.html</pre></blockquote>
where XXX is your github ID.
<p>
This time, there are three parts.  Part 1 and part 2 each have a
run script.  
<p>
Once you've copied the starting files into your turnin directory and
set up MATERIALS_DIR_203, you should be able to run the tests in part 1.
When you do, it should look something like this:
<blockquote><pre>wffoote@Lelu:~/cpe203/turnin-wffoote/lab02/part1$ ./run.sh 
Test failed:
edu.calpoly.testy.TestFailed:  : expected:  1.7  actual:  0.0
	at edu.calpoly.testy.Assert.assertEquals(Assert.java:475)
	at edu.calpoly.testy.Assert.assertEquals(Assert.java:1390)
	at TestCases.testSimpleIf1(TestCases.java:20)
	at TestCases.lambda$runTests$0(TestCases.java:149)
	at edu.calpoly.testy.Testy.run(Testy.java:79)
	at TestCases.runTests(TestCases.java:148)
	at Main.main(Main.java:13)

... More "TestFailed" errors ...

16 total tests:
    14 failed.
    2 passed.  </pre></blockquote>

<div class="header">
<h2>Part 1: Java Control Constructs and Collection Introduction</h2>
</div>

<p>
In the provided <code>part1</code> subdirectory, edit each of the given
files to complete the implementations and tests. Comments in each file
will direct the edits that you are expected to make. Look up any classes you don't know how to use (such as <code>List</code>) in the Java Standard Library.
</p>

<p>
It is recommended that you use the order of the unit tests in
<code>TestCases.java</code> as a guide for the order in which
to complete the methods.  This order corresponds to the increasing
complexity of the methods.  A good process to follow would be to read
the first group of tests in <code>TestCases.java</code>. Edit the corresponding
class to make the code pass the tests. <i>Run</i> the tests to make sure
they now pass.  Add the required additional test case. <i>Run</i> the tests again.
Then move on to the next group.
<p>
The code uses a number of classes in the Java Collections Framework.  You
can tell what they're called by looking at the source.  For example,
<code>ExampleMap.java</code> uses <code>java.util.LinkedList</code>,
<code>java.util.List</code> and <code>java.util.Map</code>.  Java does support
a "wildcard import" statement ("<code>import java.util.*;</code>") that
imports all of the classes in a given package.  Most good style guides 
recommend against overuse of these wildcard imports.  Importing each class
individually might be more typing, but it makes your code easier to read,
and that's almost always much more important than a slight time savings.
<p>
Do NOT google for the documentation of these classes.  If you do, you will
get bad advice, wrong advice, and information about the wrong versions.
Instead, get in the habit of reading the
<a href="You should have set this environment variable when
    you followed the setup instructions for this class.">official documentation</a>
that you bookmarked earlier.  To find <code>java.util.List</code>, for
example, click on <code>java.util</code> in the Packages pane, and then
<code>List</code> in the pane under that.  It's OK if you don't
understand all of the methods in every class, but you should be able to
find what you need fairly quickly.
<p>
After each small change, re-run the program.  You should get in the habbit
of compiling and running your program at least once every five or ten
minutes.  That way, most errors you find will be in something you've done
recently, and still remember.
<p>
The output for a failed test can be verbose - a stack trace is
printed.  You can see the specific error at the numbered line above
each stack trace.  It's generally a good idea to fix the code one file 
at a time, re-run it after each fix to make sure that the number of errors 
is decreasing.
<p>
Take a look at the way the tests are run, at the end 
of <code>TestCases.java</code>.  This syntax is using a Java construct
called a "lambda expression" that you'll be learning in the coming weeks.
For now, just know that you can list tests to be run using this syntax,
when you invoke the method <code><a href="https://testy.jovial.com/javadocs/edu/calpoly/testy/Testy.html#run-edu.calpoly.testy.TestRunnable...-">Testy.run(TestRunnable...)</a></code>.  You'll need to do this in part 2.
</p>

<div class="header">
<h2>Part 2: Classes and Objects</h2>
</div>

<p>
For this part you will implement a simple class (named <code>Point</code>)
representing a point in two-dimensional space.  Do this by creating a new file
named <code>Point.java</code> and write code for it as specified 
below.  This class 
must include a single constructor, and support the following operations:
</p>

<ul>
<li>
<p><code>public Point(double x, double y)</code></p>
<p>Constructor.</p>
</li>
<li>
<p><code>public double getX()</code></p>
<p>Returns the x-coordinate of this point.</p>
</li>
<li>
<p><code>public double getY()</code></p>
<p>Returns the y-coordinate of this point.</p>
</li>
<li>
<p><code>public double getRadius()</code></p>
<p>Returns the distance from the origin to the point.</p>
</li>
<li>
<p><code>public double getAngle()</code></p>
<p>Returns the  angle (in radians) from the x-axis in the in  range of -<em>pi</em> to <em>pi</em>.</p>
</li>
<li>
<p><code>public Point rotate90()</code></p>
<p>Returns a newly created Point representing a 90-degree (counterclockwise)
rotation of <code>this</code> point about the origin.  This should be
counterclockwise when pictured with normal mathematical axes, where x increases
to the right, and y increases as you go up.  Consider drawing
a picture for a point not on an axis as a guide for how you might implement
this operation (hint: there is a solution that does not require any
sophisticated computations). 

</li>
</ul>

<p>
Update the given <code>TestCases.java</code> file, in the <code>part2</code>
directory, to verify that your implementation is working.  <b>You will be asked to show
a test case for every method you wrote.</b>
You will see some
existing test cases that are used to verify some design/style aspects of your
implementation, which you do not need to change or modify.
</p>

<p><i>Note that you are not expected to define
equality for <code>Point</code> objects at this time; as such, you will
need to test the components (<code>x</code> and <code>y</code>) for the
expected values.  You may write <code>equals()</code> and <code>toString()</code>
methods for <code>Point</code> if you know how.</i></p>

<div class="header">
<h2>Part 3: UML</h2>
</div>
<p>
See the <a href="part3/UMLexercise.pdf">pdf description</a> of the UML 
portion of this lab.  Store your diagram in a file called
<code>point.graphml</code>.

<div class="header">
<h2>Demo</h2>
</div>

<div class="header">
<h2>Submission</h2>
</div>

<p>
Submit your code for Parts 1 and 2 in <code>turninXXX/lab02</code> to GitHub by midnight on the due date.  
If you'd like to submit the lab one day late with a penalty of 5%, 
add a file called <code>late_5_percent_off.txt</code> to the 
<code>lab02</code> directory.  If you'd like to submit the lab two 
days late with a penalty of 15%, add a file called
<code>late_15_percent_off.txt</code> to the <code>lab02</code>
directory.  Make sure you add and push the late file.
<p>
After your code is working and submitted,
check you submission using the <code>checkgit</code> command on the
unix server.  If the autograder can't compile your lab for a reason that
is caught by <code>checkgit</code>, you will get a zero on the lab.  To
check your submission, on a Unix server type:
<blockquote><pre>checkgit &lt;git-login> 203 lab02</pre></blockquote>
<p>
If it works, you will see the message "** Tests Passed **".  If not,
you will see some kind of error message.  The error message might not tell
you exactly what you need to change, but it should give an indication as
to what is wrong.
</p>

</div>
</div>
</body>
</html>
